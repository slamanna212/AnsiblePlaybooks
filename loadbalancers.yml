#################################################
#  HAproxy Load balancers
# Make sure --ask-vault-pass is passed when this playbook
# runs
#################################################
---
    - hosts: all
      become: true
      vars_files:
        - group_vars/loadbalancer.yml

    # Install Packages
        - name: Update package mirrors and existing packages
          apt: update_cache=yes upgrade=yes
    
        - name: Install required packages
          apt: name={{ sys_packages }} state=latest

    # Add cloudflare origin cert
        - name: Add Cloudflare origin certificate to server(s)
          copy:
           src: files/Loadbalancers/bene-it.com/pem
           dest: /etc/ssl/private/bene-it.com.pem
           remote_src: no            